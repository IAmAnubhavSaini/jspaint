/*! jspaint 2015-07-12 Anubhav Saini (c) 2015 */
$(function(){"use strict";var a={CONSTANTS:{id:"CircleTool",selectionId:"#CircleTool","class":"main-tool",title:"Click to draw circle. Click again to disable.",previewId:"previewCircle"},VARIABLES:{innerRadius:10},start:function(b){function c(b){$("<div></div>").attr("id",a.CONSTANTS.previewId).css({position:"fixed","z-index":"2","border-radius":"50%"}).appendTo(".utilities").on("click",function(b){e={event:b,relativeTo:$(d)},f=Actions.Mouse.getX(e),g=Actions.Mouse.getY(e),h=a.VARIABLES.innerRadius,i=parseInt(a.VARIABLES.innerRadius)+1,CANVASAPI.drawCircle({X:f,Y:g,innerRadius:h,outerRadius:i,strokeColor:selectedPrimaryColor})}).on("mousemove",function(b){$(this).css("top",b.pageY-a.VARIABLES.innerRadius-window.scrollY).css("left",b.pageX-a.VARIABLES.innerRadius-window.scrollX).css("border","thin solid "+selectedPrimaryColor).css("height",2*a.VARIABLES.innerRadius).css("width",2*a.VARIABLES.innerRadius),o=parseInt($(this).offset().left)+parseInt(a.VARIABLES.innerRadius),p=parseInt($(this).offset().top)+parseInt(a.VARIABLES.innerRadius),k=$(d).offset().left,l=$(d).offset().top,(k>o||parseInt(k)+parseInt(n)<o||l>p||parseInt(l)+parseInt(m)<p)&&$(this).hide()})}var d=(b.event||CONSTANTS.Events.mouseclick,"#"+(b.canvasId||CONSTANTS.canvasId)),e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=$(d).height(),n=$(d).width(),o=null,p=null;c(),$(d).on("mousemove",function(b){j=j||$("#"+a.CONSTANTS.previewId),j.css("top",b.pageY-a.VARIABLES.innerRadius-window.scrollY).css("left",b.pageX-a.VARIABLES.innerRadius-window.scrollX).css("border","thin solid "+selectedPrimaryColor).css("height",2*a.VARIABLES.innerRadius).css("width",2*a.VARIABLES.innerRadius).show()})},stop:function(b){var c=b.event||CONSTANTS.Events.mouseclick,d="#"+(b.canvasId||CONSTANTS.canvasId);$(d).off(c),$("#"+a.CONSTANTS.previewId).off("mousemove"),$("#"+a.CONSTANTS.previewId).remove()},ContextMenu:{activate:function(b){function c(a,b){return $('<input id="'+a+'" type="range" min="1" max="200" step="1" title="'+b+'" />')}function d(b){var d=$("<div></div>").attr("id",b.id).addClass("menu-item"),e=c("radiusCircle","innerRadius for circle tool.").attr("value",a.VARIABLES.innerRadius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){a.VARIABLES.innerRadius=$(this).val()});e.appendTo(d),d.appendTo($(b.containerSelectionCriterion))}d(b)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"CircleContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}},Events:{register:function(b){var c=b.toolId||a.CONSTANTS.selectionId,d=$(c),e=a.ContextMenu;setupToolTips(d,a.CONSTANTS.title),b.tool=d,d.funcToggle("click",function(){activateTool(b),e.activate(e.getOptions()),activeTool=d},function(){activeTool=null,deactivateTool(b),e.deactivate(e.getOptions())})}}};a.Events.register({toolId:a.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:a.start,stop:a.stop})});