/*! jspaint 2015-07-06 Anubhav Saini (c) 2015 */
$(function(){"use strict";var a={CONSTANTS:{id:"DiscTool",selectionId:"#DiscTool","class":"main-tool",title:"Click to draw disc of fixed radius on draw area using click. Click again to disable."},VARIABLES:{radius:10},start:function(b){var c=b.event||CONSTANTS.Events.mouseclick,d="#"+(b.canvasId||CONSTANTS.canvasId),e=null,f=null,g=null,h=null;$(d).on(c,function(b){e={event:b,relativeTo:$(this)},f=Actions.Mouse.getX(e),g=Actions.Mouse.getY(e),h=a.VARIABLES.radius,CANVASAPI.fillCirc(f,g,h)})},stop:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b)},ContextMenu:{activate:function(b){function c(){return $('<input id="radiusDisc" type="range" min="1" max="200" step="1" title="radius for disc tool." />')}function d(b){var d=$("<div></div>").attr("id",b.id).addClass("menu-item"),e=c().attr("value",a.VARIABLES.radius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){a.VARIABLES.radius=$(this).val()});e.appendTo(d),d.appendTo($(b.containerSelectionCriterion))}d(b)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"DiscContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}},Events:{register:function(b){var c=b.toolId||a.CONSTANTS.selectionId,d=$(c),e=a.ContextMenu;setupToolTips(d,a.CONSTANTS.title),b.tool=d,d.funcToggle("click",function(){activateTool(b),e.activate(e.getOptions()),activeTool=d},function(){activeTool=null,deactivateTool(b),e.deactivate(e.getOptions())})}}};a.Events.register({toolId:a.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:a.start,stop:a.stop})});