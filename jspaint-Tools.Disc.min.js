/*! jspaint 2015-07-12 Anubhav Saini (c) 2015 */
$(function(){"use strict";var a={CONSTANTS:{id:"DiscTool",selectionId:"#DiscTool","class":"main-tool",title:"Click to draw disc. Click again to disable.",previewId:"previewDisc"},VARIABLES:{radius:10},start:function(b){function c(b){$("<div></div>").attr("id",a.CONSTANTS.previewId).css({position:"fixed","z-index":"2","border-radius":"50%"}).appendTo(".utilities").on("click",function(b){e={event:b,relativeTo:$(d)},f=Actions.Mouse.getX(e),g=Actions.Mouse.getY(e),h=a.VARIABLES.radius,CANVASAPI.fillCirc(f,g,h)}).on("mousemove",function(b){$(this).css("top",b.pageY-a.VARIABLES.radius-window.scrollY).css("left",b.pageX-a.VARIABLES.radius-window.scrollX).css("background-color",selectedPrimaryColor).css("border","thin dashed "+selectedAlternativeColor).css("height",2*a.VARIABLES.radius).css("width",2*a.VARIABLES.radius),n=parseInt($(this).offset().left)+parseInt(a.VARIABLES.radius),o=parseInt($(this).offset().top)+parseInt(a.VARIABLES.radius),j=$(d).offset().left,k=$(d).offset().top,(j>n||parseInt(j)+parseInt(m)<n||k>o||parseInt(k)+parseInt(l)<o)&&$(this).hide()})}var d=(b.event||CONSTANTS.Events.mouseclick,"#"+(b.canvasId||CONSTANTS.canvasId)),e=null,f=null,g=null,h=null,i=null,j=$(d).offset().left,k=$(d).offset().top,l=$(d).height(),m=$(d).width(),n=null,o=null;c(),$(d).on("mousemove",function(b){i=i||$("#"+a.CONSTANTS.previewId),i.css("top",b.pageY-a.VARIABLES.radius-window.scrollY).css("left",b.pageX-a.VARIABLES.radius-window.scrollX).css("background-color",selectedPrimaryColor).css("height",2*a.VARIABLES.radius).css("width",2*a.VARIABLES.radius).show()})},stop:function(b){var c=b.event||CONSTANTS.Events.mouseclick,d="#"+(b.canvasId||CONSTANTS.canvasId);$(d).off(c),$("#"+a.CONSTANTS.previewId).off("mousemove"),$("#"+a.CONSTANTS.previewId).remove()},ContextMenu:{activate:function(b){function c(){return $('<input id="radiusDisc" type="range" min="1" max="200" step="1" title="radius for disc tool." />')}function d(b){var d=$("<div></div>").attr("id",b.id).addClass("menu-item");c().attr("value",a.VARIABLES.radius).on("mouseover",function(){$(this).attr("title",$(this).val())}).on("input",function(){a.VARIABLES.radius=$(this).val()}).appendTo(d);d.appendTo($(b.containerSelectionCriterion))}d(b)},deactivate:function(a){function b(a){$("#"+a.id).remove()}b(a)},getOptions:function(){return{tool:this,id:"DiscContextMenu",containerSelectionCriterion:".contextual-tool-bar"}}},Events:{register:function(b){var c=b.toolId||a.CONSTANTS.selectionId,d=$(c),e=a.ContextMenu;setupToolTips(d,a.CONSTANTS.title),b.tool=d,d.funcToggle("click",function(){activateTool(b),e.activate(e.getOptions()),activeTool=d},function(){activeTool=null,deactivateTool(b),e.deactivate(e.getOptions())})}}};a.Events.register({toolId:a.CONSTANTS.selectionId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:a.start,stop:a.stop})});