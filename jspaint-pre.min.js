/*! jspaint 2015-09-01 Anubhav Saini (c) 2015 */
CONSTANTS={canvasId:"jspaint-canvas",canvasContainerId:"jspaint-paint-area",basicColors:[{hex:"00FFFF",name:"Aqua"},{hex:"000000",name:"Black"},{hex:"0000FF",name:"Blue"},{hex:"FF00FF",name:"Fuchsia"},{hex:"808080",name:"Gray"},{hex:"008000",name:"Green"},{hex:"00FF00",name:"Lime"},{hex:"800000",name:"Maroon"},{hex:"000080",name:"Navy"},{hex:"808000",name:"Olive"},{hex:"800080",name:"Purple"},{hex:"FF0000",name:"Red"},{hex:"C0C0C0",name:"Silver"},{hex:"008080",name:"Teal"},{hex:"FFFFFF",name:"White"},{hex:"FFFF00",name:"Yellow"}],Events:{mousemove:"mousemove",mouseclick:"click"}},$(function(){LocalStorageAvailable=function(){return void 0!==localStorage&&null!==localStorage};var a=function(){return window.location.toString().split("?")[1].split("=")[1]};size=function(){return LocalStorageAvailable()?localStorage.getItem("dimensionsWxH"):a()},sizeX=size().split("x")[0],sizeY=size().split("x")[1],selectedAlternativeColor="#FF0000",selectedPrimaryColor="#000000",context=null,CanvasState=[],Actions={Mouse:{getX:function(a){var b=a.event,c=a.relativeTo,d=b.pageX-c.offset().left;return d},getY:function(a){var b=a.event,c=a.relativeTo,d=b.pageY-c.offset().top;return d}}},CANVASAPI={fillCirc:function(a,b,c){context.beginPath(),context.arc(a,b,c,0,2*Math.PI,!1),context.fill()},drawCircle:function(a){context.save(),context.beginPath(),context.arc(a.X,a.Y,a.innerRadius,0,2*Math.PI,!1),context.lineWidth=a.outerRadius-a.innerRadius,context.strokeStyle=a.strokeColor,context.stroke(),context.restore()},fillSquare:function(a,b,c){context.fillRect(a,b,c,c)},fillRoatedSquare:function(a,b,c,d){context.save(),context.translate(a+c/2,b+c/2),context.rotate(d),context.translate(-1*(a+c/2),-1*(b+c/2)),CANVASAPI.fillSquare(a,b,c),context.restore()},fillRotatedRectangle:function(a,b,c,d,e){context.save(),context.translate(a+c/2,b+d/2),context.rotate(e),context.translate(-1*(a+c/2),-1*(b+d/2)),context.fillRect(a,b,c,d),context.restore()},fillRing:function(a){CANVASAPI.fillCirc(a.X,a.Y,a.outerRadius),context.save(),context.fillStyle=a.fillColor,CANVASAPI.fillCirc(a.X,a.Y,a.innerRadius),context.restore()},drawLineSegmentFromLastPoint:function(a){var b=a.context,c=a.last,d=a.current,e=a.width;b.beginPath(),b.moveTo(c.X,c.Y),b.lineTo(d.X,d.Y),b.lineWidth=e,b.strokeStyle=selectedPrimaryColor,b.stroke(),CANVASAPI.fillCirc(d.X,d.Y,e/2)}},Color={generateBasicColorPalette:function(a){var b=a.appendHere||".BasicColorPalette",c=$("<div></div>"),d=$("<div></div>"),e=c,f=null,g=null,h=a.basicColors||CONSTANTS.basicColors,i=h.length,j=0;for(j=0;i>j;j++)e=i/2>j?c:d,f="#"+h[j].hex,g=$("<div></div>").addClass("color").attr("id","Color-Hex-"+f).css("background-color",f).appendTo(e);c.appendTo(b),d.appendTo(b)},hexToRgb:function(a){var b=null,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},rgbToHex:function(a,b,c){function d(a){var b=a.toString(16);return 1==b.length?"0"+b:b}return"#"+d(a)+d(b)+d(c)}},setupToolTips=function(a,b){a.attr("title",b).attr("data-toggle","tooltip").attr("data-placement","bottom")},activateTool=function(a){null!==activeTool&&activeTool.trigger("click"),activeTool=a.tool,$("label#activated-tool-name").html(a.toolName),a.start(a)},deactivateTool=function(a){activeTool=null,$("label#activated-tool-name").html("no active tool"),a.stop(a)},activeTool=null});