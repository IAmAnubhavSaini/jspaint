/*! jspaint 2015-07-11 Anubhav Saini (c) 2015 */
$(function(){"use strict";var a={CONSTANTS:{id:"pick-color",selectionId:"#pick-color","class":"string-menu-item",containerId:"PickColorTool",title:"Click to pick color under mouse pointer tip; picks until some other tool is selected. Click again to disable."},start:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId),d=null,e=null,f=null,g=null,h=0,i=0,j=0,k=0;$(c).on(b,function(a){d={event:a,relativeTo:$(this)},e=Actions.Mouse.getX(d),f=Actions.Mouse.getY(d),g=context.getImageData(e-.5,f-.5,e+.5,f+.5).data,h=g[0],i=g[1],j=g[2],k=g[3],selectedPrimaryColor=context.fillStyle="rgba("+h+", "+i+", "+j+", "+k+")"})},stop:function(a){var b=a.event||CONSTANTS.Events.mouseclick,c="#"+(a.canvasId||CONSTANTS.canvasId);$(c).off(b)},Events:{register:function(b){var c=b.toolId||a.CONSTANTS.selectionId,d=$(c);setupToolTips(d,a.CONSTANTS.title),b.tool=d,d.funcToggle("click",function(){activateTool(b),activeTool=$(this)},function(){activeTool=null,deactivateTool(b)})}}};a.Events.register({toolId:a.CONSTANTS.selectionId,containerId:a.CONSTANTS.containerId,event:CONSTANTS.Events.mouseclick,canvasId:CONSTANTS.canvasId,start:a.start,stop:a.stop})});