/*! jspaint 2015-06-30 */
!function(a){"use strict";a(function(){var b={canvasId:"jspaint-canvas",containerId:"jspaint-paint-area",activeToolCursorClass:"working-with-tools",maintoolsClass:"main-tool",basicColors:[{id:"00FFFF",name:"Aqua"},{id:"000000",name:"Black"},{id:"0000FF",name:"Blue"},{id:"FF00FF",name:"Fuchsia"},{id:"808080",name:"Gray"},{id:"008000",name:"Green"},{id:"00FF00",name:"Lime"},{id:"800000",name:"Maroon"},{id:"000080",name:"Navy"},{id:"808000",name:"Olive"},{id:"800080",name:"Purple"},{id:"FF0000",name:"Red"},{id:"C0C0C0",name:"Silver"},{id:"008080",name:"Teal"},{id:"FFFFFF",name:"White"},{id:"FFFF00",name:"Yellow"}]},c=window.location.toString().split("?")[1].split("=")[1],d=c.split("x")[0],e=c.split("x")[1],f="",g="",h=null,i=function(){for(var c=a("<div></div>"),d=a("<div></div>"),e=c,f=0,g=b.basicColors.length;g>f;f++){e=g/2>f?c:d;var h="#"+b.basicColors[f].id,i=a('<div class="color" id="Color-Hex-'+h+'" style="background-color: '+h+';"></div>');i.appendTo(e)}c.appendTo(".BasicColorPalette"),d.appendTo(".BasicColorPalette")},j=function(c){a("#"+b.canvasId).awesomeCursor("pencil",{hotspot:"bottom left"}),a(c.tool).addClass("active-tool")},k=function(c){a("#"+b.canvasId).awesomeCursor("ban"),a(c.tool).removeClass("active-tool")},l=function(){var c=d,f=e;return a("<canvas/>",{id:b.canvasId}).prop({width:c,height:f}).appendTo("#"+b.containerId),a("#"+b.canvasId)[0].getContext("2d")},m=function(){a("#"+b.canvasId).on("mousemove",function(b){h.fillRect(b.pageX-a(this).offset().left,b.pageY-a(this).offset().top,2,2)})},n=function(){a("#"+b.canvasId).off("mousemove")},o={fillCirc:function(a,b,c){h.beginPath(),h.arc(a,b,c,0,2*Math.PI,!1),h.fill()}},p=function(){a("#"+b.canvasId).on("click",function(b){o.fillCirc(b.pageX-a(this).offset().left,b.pageY-a(this).offset().top,4)})},q=function(){a("#"+b.canvasId).off("click")},r=function(a){return"#"+a.attr("id").split("#")[1]},s=function(c){a("#"+b.canvasId).on("mousemove",function(b){void 0!==b.buttons&&1===b.buttons&&h.fillRect(b.pageX-a(this).offset().left,b.pageY-a(this).offset().top,2,2)})},t=function(c){a("#"+b.canvasId).off("mousemove")},u=function(a,b){null!==w&&w.trigger("click"),j(a),b(a)},v=function(a,b){k(a),b(a)},w=null,x=function(){a("#FreeStyleSpeedDotsTool").funcToggle("click",function(){u({tool:this},m),w=a(this)},function(){w=null,v({tool:this},n)})},y=function(){a("#CircleStampTool").funcToggle("click",function(){u({tool:this},p),w=a(this)},function(){w=null,v({tool:this},q)})},z=function(){a("#PencilTool").funcToggle("click",function(){u({tool:this},s),w=a(this)},function(){w=null,v({tool:this},t)})},A=function(){a(".color").on("click",function(){g=h.fillStyle=r(a(this))}).on("contextmenu",function(){f=r(a(this))})},B=function(b){a("#"+b.containerId+" #"+b.toolId).on("input",function(){g=h.fillStyle=a(this).val()})},C=function(){A(),z(),y(),x(),B({toolId:"allColorsPicker",containerId:"HTML5ColorPicker"})},D=function(){a("#jspaint-paint-area").css({width:d,height:e})},E=function(){a("."+b.maintoolsClass).attr("title","Click to activate;\nRight-click to deactivate;")},F=function(){a(".top-taker").TopTaker({theme:"dark"})},G=function(){D(),h=l(),E(),F(),i(),C()};G()})}(jQuery);